<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhysicsLab Virtual - Homepage</title>
    <link rel="stylesheet" href="../css/homepage.css">
</head>
<body>
    <!-- Homepage Dashboard -->
    <div class="dashboard">
        <header class="dashboard-header">
            <div class="container">
                <div class="dashboard-nav">
                    <div class="logo">
                        <img src="../assets/4.png" alt="PhysicsLab Logo" style="width: 40px; height: 40px; margin-right: 0px; vertical-align: middle;"> PhysicsLab Virtual
                    </div>
                    <div class="user-info">
                        <span id="userName">John Doe</span>
                        <div class="avatar" id="userAvatar">JD</div>
                        <button class="btn btn-secondary" onclick="NavigationManager.logout()" style="padding: 8px 16px;">
                            Keluar
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <main class="dashboard-content">
            <div class="container">
                <div class="welcome-section fade-in">
                    <h1>Selamat Datang di PhysicsLab Virtual!</h1>
                    <p>Mulai eksplorasi konsep fisika dengan simulasi interaktif yang menarik</p>
                    <div class="floating-particles">
                        <div class="particle particle-1"></div>
                        <div class="particle particle-2"></div>
                        <div class="particle particle-3"></div>
                        <div class="particle particle-4"></div>
                        <div class="particle particle-5"></div>
                    </div>
                    <div class="formula-shimmer"></div>
                </div>



                <div class="labs-grid" id="labsGrid">
                    <!-- Lab cards will be populated by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script>
    
        // PHYSICSLAB HOMEPAGE - MODULAR JAVASCRIPT

        // CONFIGURATION & CONSTANTS
        const CONFIG = {
            AVAILABLE_LABS: ['newton-laws'],
            STORAGE_KEYS: {
                USER: 'currentUser'
            },
            ANIMATION: {
                DURATION: 300,
                FADE_OUT: 'opacity 0.3s ease'
            }
        };

        // DATA LAYER
        const DataManager = {
            // Lab data - centralized data management
            labsData: [
                {
                    id: 'newton-laws',
                    title: 'Hukum II Newton',
                    description: 'Pelajari hukum II Newton dengan simulasi interaktif. Eksperimen dengan massa, gaya, dan percepatan.',
                    icon: 'ðŸš€',
                    difficulty: 'Pemula',
                    completed: true
                },
                {
                    id: 'projectile-motion',
                    title: 'Gerak Proyektil',
                    description: 'Simulasi gerak peluru dengan berbagai sudut dan kecepatan awal. Analisis lintasan dan jangkauan.',
                    icon: 'ðŸŽ¯',
                    difficulty: 'Menengah',
                    completed: false
                },
                {
                    id: 'waves-oscillation',
                    title: 'Gelombang & Osilasi',
                    description: 'Eksplorasi gelombang mekanik, frekuensi, amplitudo, dan fenomena interferensi.',
                    icon: 'ðŸŒŠ',
                    difficulty: 'Menengah',
                    completed: false
                },
                {
                    id: 'thermodynamics',
                    title: 'Termodinamika',
                    description: 'Simulasi proses termodinamika, hukum gas ideal, dan siklus Carnot.',
                    icon: 'ðŸŒ¡ï¸',
                    difficulty: 'Lanjut',
                    completed: false
                },
                {
                    id: 'electromagnetism',
                    title: 'Elektromagnetisme',
                    description: 'Visualisasi medan listrik, medan magnet, dan induksi elektromagnetik.',
                    icon: 'âš¡',
                    difficulty: 'Lanjut',
                    completed: false
                },
                {
                    id: 'optics',
                    title: 'Optik Geometris',
                    description: 'Simulasi pembiasan, pemantulan, dan pembentukan bayangan pada lensa dan cermin.',
                    icon: 'ðŸ”',
                    difficulty: 'Menengah',
                    completed: false
                }
            ],

            // Get lab by ID
            getLabById(labId) {
                return this.labsData.find(lab => lab.id === labId);
            },

            // Check if lab is available
            isLabAvailable(labId) {
                return CONFIG.AVAILABLE_LABS.includes(labId);
            },

            // Get user data from storage
            getCurrentUser() {
                const userData = localStorage.getItem(CONFIG.STORAGE_KEYS.USER);
                return userData ? JSON.parse(userData) : null;
            },

            // Save user data to storage
            saveCurrentUser(user) {
                localStorage.setItem(CONFIG.STORAGE_KEYS.USER, JSON.stringify(user));
            },

            // Clear user session
            clearUserSession() {
                localStorage.removeItem(CONFIG.STORAGE_KEYS.USER);
            }
        };

        // UI CONTROLLER
        const UIManager = {
            // Update user interface elements
            updateUserInfo(user) {
                if (user) {
                    document.getElementById('userName').textContent = user.name;
                    document.getElementById('userAvatar').textContent = user.avatar;
                }
            },

            // Populate labs grid with cards
            populateLabsGrid() {
                const grid = document.getElementById('labsGrid');
                grid.innerHTML = '';

                DataManager.labsData.forEach(lab => {
                    const labCard = this.createLabCard(lab);
                    grid.appendChild(labCard);
                });
            },

            // Create individual lab card
            createLabCard(lab) {
                const labCard = document.createElement('div');
                labCard.className = 'lab-card fade-in';
                labCard.innerHTML = `
                    <div class="lab-image">
                        <div class="icon">${lab.icon}</div>
                    </div>
                    <div class="lab-content">
                        <div class="lab-title">${lab.title}</div>
                        <div class="lab-description">${lab.description}</div>
                        <div class="lab-meta">
                            <span>ðŸ“Š ${lab.difficulty}</span>
                        </div>
                        <button class="btn btn-primary" onclick="NavigationManager.showSimulation('${lab.id}')" style="width: 100%;">
                            ${this.getButtonText(lab)}
                        </button>
                    </div>
                `;
                return labCard;
            },

            // Get appropriate button text based on lab status
            getButtonText(lab) {
                if (DataManager.isLabAvailable(lab.id)) {
                    return lab.completed ? 'ðŸ”„ Ulangi Lab' : 'ðŸš€ Mulai Lab';
                }
                return 'ðŸ”® Segera Hadir';
            },

            // Show coming soon modal
            showComingSoonModal(lab) {
                const modal = document.createElement('div');
                modal.className = 'coming-soon-modal';
                modal.innerHTML = `
                    <div class="coming-soon-content">
                        <div class="coming-soon-icon">${lab.icon}</div>
                        <h3>Simulasi Akan Segera Tersedia!</h3>
                        <p><strong>${lab.title}</strong></p>
                        <p style="margin-bottom: 20px; color: #666;">Lab ini sedang dalam pengembangan dan akan segera hadir dengan simulasi interaktif yang menarik.</p>
                        <button class="btn btn-primary" onclick="UIManager.closeComingSoonModal()">Mengerti</button>
                    </div>
                `;

                document.body.appendChild(modal);
                setTimeout(() => modal.classList.add('show'), 100);
            },

            // Close coming soon modal
            closeComingSoonModal() {
                const modal = document.querySelector('.coming-soon-modal');
                if (modal) {
                    modal.classList.remove('show');
                    setTimeout(() => modal.remove(), CONFIG.ANIMATION.DURATION);
                }
            },

            // Add fade out animation to page
            fadeOutPage(callback) {
                document.body.style.transition = CONFIG.ANIMATION.FADE_OUT;
                document.body.style.opacity = '0';

                setTimeout(callback, CONFIG.ANIMATION.DURATION);
            }
        };

        // NAVIGATION MANAGER
        const NavigationManager = {
            // Handle lab simulation navigation
            showSimulation(labId) {
                if (DataManager.isLabAvailable(labId)) {
                    // Available lab - redirect to simulation
                    window.location.href = `simulation.html?lab=${labId}`;
                } else {
                    // Coming soon lab - show notification
                    const lab = DataManager.getLabById(labId);
                    UIManager.showComingSoonModal(lab);
                }
            },

            // Handle user logout
            logout() {
                DataManager.clearUserSession();
                UIManager.fadeOutPage(() => {
                    window.location.href = '../index.html';
                });
            }
        };


        // APPLICATION CONTROLLER
        const AppController = {
            // Initialize the application
            init() {
                this.checkAuthentication();
                this.initializeUI();
                this.bindEvents();
            },

            // Check if user is authenticated
            checkAuthentication() {
                const user = DataManager.getCurrentUser();
                if (user) {
                    UIManager.updateUserInfo(user);
                } else {
                    // Redirect to login if not authenticated
                    window.location.href = 'index.html';
                }
            },

            // Initialize user interface
            initializeUI() {
                UIManager.populateLabsGrid();
            },

            // Bind global event listeners
            bindEvents() {
                // Make functions globally available
                window.NavigationManager = NavigationManager;
                window.UIManager = UIManager;
                window.DataManager = DataManager;
                window.AppController = AppController;
            }
        };

        // APPLICATION INITIALIZATION
        document.addEventListener('DOMContentLoaded', () => {
            AppController.init();
        });


        // GLOBAL FUNCTION EXPORTS
        // Keep these for backward compatibility
        function showSimulation(labId) { NavigationManager.showSimulation(labId); }
        function logout() { NavigationManager.logout(); }
    </script>
</body>
</html>